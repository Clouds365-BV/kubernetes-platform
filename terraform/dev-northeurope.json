{
  "env": {
    "name": "development",
    "name_short": "dev",
    "location_short": "ne",
    "tags": {
      "Environment": "development",
      "Owner": "Drone Shuttles",
      "Project": "Ghost"
    },
    "log_analytics_workspace": {
      "sku_name": "PerGB2018",
      "retention_in_days": 31
    },
    "application_insights": {
      "log_analytics_workspace": "main",
      "application_type": "web",
      "retention_in_days": 31
    },
    "vnet": {
      "address_space": [
        "10.10.0.0/16"
      ],
      "subnets": {
        "private-endpoint": {
          "address_prefixes": [
            "10.10.10.0/24"
          ]
        },
        "postgresql-flexible-server": {
          "address_prefixes": [
            "10.10.20.0/24"
          ],
          "delegations": {
            "main": {
              "name": "Microsoft.DBforMySQL/flexibleServers",
              "actions": [
                "Microsoft.Network/virtualNetworks/subnets/join/action"
              ]
            }
          }
        }
      }
    },
    "private_dns_zone": {
      "privatelink.postgres.database.azure.com": {
        "virtual_networks": {
          "main": {},
          "ase": {
            "data_resource": true
          }
        }
      }
    },
    "identity": {
      "web-app": {
        "container_registry": {
          "name": "test",
          "role": "AcrPull"
        }
      }
    },
    "key_vault": {
      "secrets": {
        "postgresql-admin-username": {
          "value": "psqladmin"
        },
        "postgresql-admin-password": {}
      }
    },
    "databases": {
      "postgresql": {

          "key_vault": "main",
          "sku_name": "B_Standard_B1ms",
        "subnet": "postgresql-flexible-server",
          "public_network_access_enabled": false,
        "administrator_login": "postgresql-admin-username",
        "administrator_password": "postgresql-admin-password",
          "private_endpoint_enabled": true,
        "private_endpoint_subnet_id": "private-endpoint",
          "private_dns_zones": [
            "privatelink.postgres.database.azure.com"
          ],
          "databases": {
            "drone": {}
          }
      }
    }
  }
}